<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>
	<title>Try it #1</title>
	<style type="text/css">
	canvas{
		border:1px solid gray;
	}
	
	h1,h2{
		font-family: 'Press Start 2P', cursive;
		margin-top:2em;
	}
	
	body{
		font-family:verdana,tahoma,sans-serif;
		margin-left:5%;
		margin-right:5%;
	}
	
	li{
		margin-bottom:1em;
	}
	
	code{
		font-size:1.2em;
	}
	
	img{
		border:1px solid black;
		padding:7px;
	}
	</style>
	<script>
		// #0 - In this course we will always use ECMAScript 5's "strict" mode
		// See what 'use strict' does here:
		// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode
		'use strict';
		
		// #1 call the init function after the pages loads
		// this is called an "event handler"
        window.onload = init;
        
        // Global variables.
        var canvas, ctx;
    
        // Clear screen.
        function clear(color) {
            drawBox(0, 0, canvas.width, canvas.height, color);
        }

        // Draw box.
        function drawBox(x, y, width, height, color){
            ctx.save();
            ctx.fillStyle = color;
            ctx.fillRect(x, y, width, height);
            ctx.restore();
        }

        function drawBoxes(x, y, width = 50, height = 50, padding = { x: 100, y: 0 }, count = 7){
            for(let i = 0; i < count; i++){
                drawBox(x + i * padding.x, y + i * padding.y, width, height, 'blue');
            }
        }

        function drawCircle(x, y, radius, color){
            ctx.save();
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2, false);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

		function drawCircles(x, y, radius = 25, padding = { x: 100, y: 0 }, count = 9) {
			let alpha = 1.0;
			for(let i = 0; i < count; i++){
				alpha -= 0.1;
				drawCircle(x + i * padding.x, y + i * padding.y, radius, `rgba(255,0,0,${alpha})`);
			}
		}

		function drawDiamond(x, y, width, height, color = 'yellow', angle = 45) {
			ctx.save();
			ctx.translate(x, y);
			ctx.rotate(angle * Math.PI / 180);
			ctx.fillStyle = color;
			ctx.fillRect(0, 0, width, height);
			ctx.restore();
		}

		function drawDiamonds(x, y, width = 45, height = 45, color = 'yellow', angle = 45, padding = { x: 100, y: 0 }, count = 7) {
			for(let i = 0; i < count; i++){
				drawDiamond(x + i * padding.x, y + i * padding.y, width, height, color, angle);
			}
		}

		function drawTriangle(x, y, width, height, lerp = 1){
			// determine color from lerp (0, 1);
			let color = `rgb(${lerp * 255},0,0)`;

			// draw the triangle.
			ctx.save();
			ctx.translate(x, y);
			ctx.fillStyle = color;
			ctx.beginPath();
			ctx.moveTo(0, height);
			ctx.lineTo(0 + (width / 2), height);
			ctx.lineTo(0, 0);
			ctx.lineTo(0 - (width / 2), height);
			ctx.closePath();
			ctx.fill();
			ctx.restore();
		}

		function drawTriangles(x, y, width = 45, height = 45, padding = { x: 100, y: 0 }, count = 7) {
			for(let i = 0; i < count; i++){
				drawTriangle(x + i * padding.x, y + i * padding.y, width, height, i / count);
			}
		}

		function drawWatermark(text, x, y, angle = 45){
			ctx.save();
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
			ctx.translate(x, y);
			ctx.rotate(angle * Math.PI / 180);
			ctx.lineWidth = 2;
			ctx.strokeStyle = '#808080';
			ctx.globalAlpha = 0.8;
			ctx.font = "100pt courier";
			ctx.strokeText(text, 0, 0);
			ctx.restore();
		}

		function init(){
			canvas = document.querySelector('canvas');
            ctx = canvas.getContext('2d');
            
            // Clear the canvas.
            clear('#66cdaa');			

            // Row 1 - Draw the boxes.
            drawBoxes(10, 20, 50, 50, { x: 100, y: 0 }, 7);
			
			// Row 2 - Draw the circles.
			drawCircles(30, 200, 20, { x: 75, y: 0 }, 9);
			
			// Row 3 - Draw rotated squares.
			drawDiamonds(30, 300, 42, 42, 'yellow', 45);
			
			// Row 4 - Draw ramp colored triangles.
			drawTriangles(30, 420);
						
			// watermark
			drawWatermark("IGME-330", canvas.width * 0.5, canvas.height * 0.5, 25);
		}
	</script>
</head>
<body>
	
	
	<h1>Instructions</h1>
	<p>This exercise (<i>"Try-it #1"</i>) is a self-test on what we've covered in our first 3 or 4 days of class. Check the mycourses dropbox for the due date, it will be counted as a HW assignment with 10/10 possible points.</p>
	<p>See below for a screenshot of what the completed version should look like. Each item must be 100% correct to receive credit. If you don't have it 100% correct, hand in what you have anyway, because late submissions will not be accepted. We'll work through the correct answers in class.</p>
	
	<h2>Rubric</h2>
	<ol>
		<li>Row #1 - the 7 blue squares are generated by <code>ctx.fillRect()</code> and a <code>for</code> loop - is done for you!</li>
		<li>Row #2 - use a <code>for</code> loop to create 9 red circles in a row. Make the alpha of each circle decrease by .1 - i.e. the first circle is 0.9 alpha, the last circle is 0.1 alpha. You can control this with <code>ctx.globalAlpha</code> or by setting the <code>ctx.fillStyle</code> with <code>rgba()</code> values. (2 points)</li>
		<li>Row #3 - use a <code>for</code> loop to create 7 yellow squares - each square will be rotated 45 degrees. You will need to use a combination of <code>ctx.translate()</code>, <code>ctx.rotate()</code>, <code>ctx.save()</code> and <code>ctx.restore()</code> to get this to work. (2 points)</li>
		<li>Row #4 - use a <code>for</code> loop to create 7 red triangles. You will create a JavaScript function named <code>drawTriangle()</code> to each triangle for you. You will need to use <code>ctx.translate()</code>, and probably <code>ctx.save()</code> and <code>ctx.restore()</code> to get this to work. (2 points)</li>
		<li>Row #4 - Modify the code above to ramp the color of each triangle in row #4 from black to bright red - i.e. from <code>rgb(0,0,0)</code> to <code>rgb(255,0,0)</code>. (2 points)</li>
		<li>"Watermark" - use <code>ctx.strokeText()</code>, <code>ctx.translate()</code> and <code>ctx.rotate()</code> to create rotated text that is centered on the screen as in the finished example. I'm using dark gray courier text with 20% alpha in the example - use something similar. <b>Try to get it as close as possible, but yours will look a little different. </b> You'll need to center the text and set the baseline before you rotate it. (2 points)</li>
		<li>Errors - Any errors thrown in the console (-1.5 points).</li>
	</ol>
	
	<h2>"Live" Canvas Version</h2>
	<canvas width="700" height="500">
		Get a real browser!
	</canvas>
	
	<h2>Completed Example</h2>
	<p><img src="files/try-it-done.jpg" alt="Done version" height="500" width="700" /></p>
	
</body>
</html>
